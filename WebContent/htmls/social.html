<!DOCTYPE html>
<!--
Personium
Copyright 2016 FUJITSU LIMITED

Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.
-->
<html lang="en">
<head>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta charset="utf-8">
<script type="text/javascript" src="../js/d3.js"></script>
<script type="text/javascript" src="../js/spin.js"></script>
<script type="text/javascript" src="../js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="../js/jquery.js"></script>
<script type="text/javascript" src="../js/jquery.modalbox.js"></script>

<script type="text/javascript" src="../js/main/core/DaoConfig.js"></script>
<script type="text/javascript" src="../js/main/core/PersoniumContext.js"></script>
<script type="text/javascript" src="../js/main/util/extend.js"></script>

<script type="text/javascript" src="../js/common.js"></script>
<script type="text/javascript" src="../js/informationStorage.js"></script>
<script type="text/javascript" src="../js/uCell.js"></script>
<script type="text/javascript" src="../js/leftNavigation.js"></script>

<script type="text/javascript" src="../js/main/util/CopyObject.js"></script>
<script type="text/javascript" src="../js/main/util/StringUtils.js"></script>
<script type="text/javascript" src="../js/main/util/UrlUtils.js"></script>
<script type="text/javascript" src="../js/main/http/PersoniumRequestHeaderBuilder.js"></script>
<script type="text/javascript" src="../js/main/http/RestAdapter.js"></script>
<script type="text/javascript" src="../js/main/http/RestAdapterFactory.js"></script>
<script type="text/javascript" src="../js/main/http/PersoniumResponse.js"></script>
<!-- include core functions -->
<script type="text/javascript" src="../js/main/core/DaoException.js"></script>

<!--script type="text/javascript" src="../js/main/core/PersoniumContext.js"></script-->
<script type="text/javascript" src="../js/main/core/AbstractODataContext.js"></script>
<script type="text/javascript" src="../js/main/core/DcCollection.js"></script>
<script type="text/javascript" src="../js/main/core/DavCollection.js"></script>
<script type="text/javascript" src="../js/main/core/ODataManager.js"></script>
<script type="text/javascript" src="../js/main/core/EntitySet.js"></script>
<script type="text/javascript" src="../js/main/core/Accessor.js"></script>
<script type="text/javascript" src="../js/main/core/DavResponse.js"></script>
<script type="text/javascript" src="../js/main/core/Account.js"></script>
<script type="text/javascript" src="../js/main/core/AccountManager.js"></script>
<script type="text/javascript" src="../js/main/core/Ace.js"></script>
<script type="text/javascript" src="../js/main/core/Acl.js"></script>
<script type="text/javascript" src="../js/main/core/AclManager.js"></script>
<script type="text/javascript" src="../js/main/core/AssociationEnd.js"></script>
<script type="text/javascript" src="../js/main/core/AssociationEndManager.js"></script>
<script type="text/javascript" src="../js/main/core/Box.js"></script>
<script type="text/javascript" src="../js/main/core/BoxManager.js"></script>
<script type="text/javascript" src="../js/main/core/Cell.js"></script>
<script type="text/javascript" src="../js/main/core/CellManager.js"></script>
<script type="text/javascript" src="../js/main/core/EntityType.js"></script>
<script type="text/javascript" src="../js/main/core/EntityTypeManager.js"></script>
<script type="text/javascript" src="../js/main/core/Event.js"></script>
<script type="text/javascript" src="../js/main/core/EventManager.js"></script>
<script type="text/javascript" src="../js/main/core/ExtCell.js"></script>
<script type="text/javascript" src="../js/main/core/ExtCellManager.js"></script>
<script type="text/javascript" src="../js/main/core/ExtRoleManager.js"></script>
<script type="text/javascript" src="../js/main/core/LinkManager.js"></script>
<script type="text/javascript" src="../js/main/core/MetadataLinkManager.js"></script>
<script type="text/javascript" src="../js/main/core/OwnerAccessor.js"></script>
<script type="text/javascript" src="../js/main/core/DcQuery.js"></script>
<script type="text/javascript" src="../js/main/core/Relation.js"></script>
<script type="text/javascript" src="../js/main/core/RelationManager.js"></script>
<script type="text/javascript" src="../js/main/core/Role.js"></script>
<script type="text/javascript" src="../js/main/core/RoleManager.js"></script>
<script type="text/javascript" src="../js/main/core/ServiceCollection.js"></script>
<script type="text/javascript" src="../js/main/core/UnitManager.js"></script>
<script type="text/javascript" src="../js/main/core/ODataCollection.js"></script>
<script type="text/javascript" src="../js/main/core/ODataResponse.js"></script>
<script type="text/javascript" src="../js/main/core/Message.js"></script>
<script type="text/javascript" src="../js/main/core/SentMessageManager.js"></script>
<script type="text/javascript" src="../js/main/core/ReceivedMessageManager.js"></script>
<script type="text/javascript" src="../js/mainNavigation.js"></script>
<script type="text/javascript" src="../js/commonFunctions.js"></script>
<script type="text/javascript" src="../js/uAccount.js"></script>
<script type="text/javascript" src="../js/common.js"></script>
<script type="text/javascript" src="../js/uBox.js"></script>
<script type="text/javascript" src="../js/boxProfile.js"></script>
<script type="text/javascript" src="../js/uRole.js"></script>
<script type="text/javascript" src="../js/uRelation.js"></script>
<script type="text/javascript" src="../js/roleToAccountMapping.js"></script> 
<script type="text/javascript" src="../js/externalCell.js"></script>
<script type="text/javascript" src="../js/externalCellToRelationMapping.js"></script> 
<script type="text/javascript" src="../js/relationToExternalCellMapping.js"></script> 
<script type="text/javascript" src="../js/relationToRoleMapping.js"></script>
<script type="text/javascript" src="../js/externalRole.js"></script>
<script type="text/javascript" src="../js/odata.js"></script>
<script type="text/javascript" src="../js/registerFileAsService.js"></script>
<script type="text/javascript" src="../js/cellProfile.js"></script>
<script type="text/javascript" src="../js/boxAcl.js"></script>
<script type="text/javascript" src="../js/cellAcl.js"></script>
<script type="text/javascript" src="../js/mainBoxAcl.js"></script>
<script type="text/javascript" src="../js/main/http/DcHttpClient.js"></script>
<script type="text/javascript" src="../js/main/http/Promise.js"></script>

<link href="../css/commonStylesheet.css" rel="stylesheet" type="text/css">
<link href="../css/homeStylesheet.css" rel="stylesheet" type="text/css">
<link href="../css/cellProfileStylesheet.css" rel="stylesheet" type="text/css">
<link href="../css/socialGraphStylesheet.css" rel="stylesheet" type="text/css">



<body id="socialGraphBody" class="bodysocialGraph">
	<div id="mainContainer">
		<!-- Header Starts -->
		<div class="cellProfileHeader" id="socialGraphHeader">
			<!--include : _header.html-->
		</div>
		<!-- Header Ends -->

		<!-- Content Container Starts -->
		<div id="contentWrapper">
			<div class="leftPanelCellList">
				<nav class="leftNav">
					<ul id="cellcountid">
						<li class="selected"><a href="#" onclick="uLeftNavigation.clickSocialGraph();" title="Social Graph" class="socialGraph">Social Graph </a></li>
						<li id="listid"><a href="#" onclick="uLeftNavigation.clickResourceMgmt();" title="Resource Management" class="resouceMgmt">Resource Management</a></li>
					</ul>
				</nav>
			</div>
			<div id ="dvUserImage" style="visibility:hidden;width:0;height:0"></div>
			
			<div style="display: none;" id="dvemptyTableMessage" 
				class="emptyTableMessage emptyTableMessageGraph">Social Graph cannot be displayed as no. of Cells exceed 1000 
			</div>
			
			<!-- Spinner code - Start -->
			<div id="modalSpinnerRelationMappingLink" class="modelbackSpinner" style="display: none;">
				<div style="display: block; height: 0; width: 0; background: transparent; position: absolute; top: 50%; left: 50%; border: 0" id="dialogSpinner">
					<div id="loadingID" class="percent">
					</div> 	

					<div id="percentID" class="percent">
					</div>

					<div id="spinnerPopUp">
					</div>
					<!-- <div>
						<img id="rotatingImage" src="../images/gridloader.gif" alt="Loading..." />
					</div>  -->
				</div>
			</div>
			<!-- Spinner code - End -->

			<div id="GraphContainer">
				<!-- <input type="button" class="normalButtonBlueCreateEnv" ID="btnCancel" value="Back" onclick="movePrevious(); return 0;" /> --> 
				<!-- here the social graph will come. -->
			</div>

			<div id="rightPanel">
				<div class="dvSlider rightAlignment" style="display:none" id="dvSliderAndList">
					<input id="btnSlideOut" type="reset" value="" class="leftslidIn leftAlignment" style="margin-top:325px;margin-left:10px">

					<div class="leftList rightAlignment" id="cellRightList" style="width:230px">
						<figure class="search">
							<input type="search" id="txtSearch"  placeholder="Enter text to search" class="searchBox"/> 
							<!-- <input type="search" id="txtSearch" value="Search" class="searchBox" onfocus="this.value='';return false;"> -->
								<input type="button" title="Search" class="searchImageSocialGraph" id="imgSearch">
								<!-- <img id="imgSearch" class="searchImage"> -->
						</figure>
						<div id="line" style="border:1px solid rgba(0, 0, 0, 0.18)"></div>
						<div id="cellData" style="border: 2; height: 560px; clear: both;overflow-y:auto;">
							<meta http-equiv="X-UA-Compatible" content="IE=edge">
							<!-- include core functions -->
							<div  id="dvCellList" style="border: 2; height: 560; clear: both"></div>
						</div>
						<div class="separator" id="ID" style="display:none;">
								<a href="#" >Down Scroll</a>
							</div> 
							<div class="topMarginForIcon" style="display:none;">
								<a class="iconMyCellOnGraph legendsGraph">My Cells</a>
								<a class="iconOthersOnGraph legendsGraph">Others</a>
							</div>
						</div>
					</div>
				<input id="btnSlideIn" type="reset" value="" class="rightslidOut rightAlignment" style="margin-top: 325px;margin-left : 10px">
			</div>

		</div>
		<!-- Content Container Ends -->

		<!-- Footer Starts -->
		<div class="footer" id="socialGraphFooter">
			<!--include : _footer.html-->
		</div>
		<!-- Footer Ends -->
	</div>
</body>


<script>

function persistTokenForGraph (){
	var jsonData				= {};
	var tempToken				= sessionStorage.tempToken;
	var envName					= sessionStorage.selectedEnvName;
	var unitURL					= sessionStorage.selectedUnitUrl;
	jsonData["token"]			= tempToken;
	jsonData["environmentName"]	= envName;
	jsonData["baseURL"]			= unitURL;
	setClientStore(jsonData);
}
common.prototype.opts = {
		lines		: 13,			// The number of lines to draw
		length		: 10,			// The length of each line
		width		: 3,			// The line thickness
		radius		: 5,			// The radius of the inner circle
		corners		: 1,			// Corner roundness (0..1)
		rotate		: 0,			// The rotation offset
		direction	: 1,			// 1: clockwise, -1: counterclockwise
		color		: '#1BDDE0',	// #rgb or #rrggbb
		speed		: 1,			// Rounds per second
		trail		: 60,			// Afterglow percentage
		shadow		: false,		// Whether to render a shadow
		hwaccel		: false,		// Whether to use hardware acceleration
		className	: 'spinner',	// The CSS class to assign to the spinner
		// zIndex	: 2e9,			// The z-index (defaults to 2000000000)
		top			: 'auto',		// Top position relative to parent in px
		left		: 'auto'		// Left position relative to parent in px
};

$(document).ready(function() {
	persistTokenForGraph();
	//$(loadingID).html("Loading...");
	//$(percentID).html('<b>0%</b>');
	//showSpinner("modalSpinnerRelationMappingLink");

});

//setTimeout(function(){removeSpinner("modalSpinnerRelationMappingLink")},1000);

function progressbar(iPerc){
	
	if (iPerc >= 100) {
		// clearInterval(vInterval);
		$(percentID).html('<b>100%</b>');

		return 1;
	} else {
		
		// window.setTimeout($(percentID).html('<b>'+iPerc.toFixed(0)+'%</b>'),5000);
		$(percentID).html('<b>'+iPerc.toFixed(0)+'%</b>');
		return 1;
	}
}

</script>
<script type="text/javascript" src="../js/socialGraph.js"></script>
<script type="text/javascript" src="../js/graph.js"></script>
</html>